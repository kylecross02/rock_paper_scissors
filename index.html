<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <script>
    let userScore = 0;
    let compScore = 0;
    let roundWinner = '';
    let max_count = 5;
    
    alert ('Can you beat the computer at Rock, Paper, Scissors? First to 5 points wins! The fate of humanity rests in your hands!')
    function game() {
        // create an array with the three options (Rock, Paper, Scissors)
        
    
        const choices = ["rock", "paper", "scissors"];
        console.log(choices);
       
        // user chooses an option between (Rock, Paper, Scissors)
        
        function userPlay() {
            userInput = prompt("Choose Rock, Paper, or Scissors! or die.");
            userChoice = userInput.toLowerCase();
            if (userChoice === 'rock' || userChoice === 'paper' || userChoice === 'scissors') {   
                userChoice = userChoice.charAt(0).toUpperCase() + userChoice.slice(1);         
            } else {
                alert('Not a valid response. Enter a valid response to live.')
                if (--max_count > 0)
                    userPlay()
            }
        }

        // computer randomly chooses an option between (Rock, Paper, Scissors)
        function computerPlay() {
            compChoice = choices[Math.floor(Math.random() * choices.length)];
            compChoice = compChoice.charAt(0).toUpperCase() + compChoice.slice(1);                    
        }

        userPlay();
        computerPlay();
    
        console.log(userChoice);
        console.log(compChoice);

        let response = "";
        
        // prints a message telling user if they won or loss and what the choices were
        function whoWins() {
            if (userChoice === compChoice) {
                response = (`You tied! Since you both chose ${compChoice} you have to go again!`);
            }
        // if user wins
            else if (
                (userChoice === 'Rock' && compChoice === 'Scissors') ||
                (userChoice === 'Paper' && compChoice === 'Rock') ||
                (userChoice === 'Scissors' && compChoice === 'Paper')
              ){ 
                response = (`Woah you took some damage off him! Your ${userChoice} beats the computers ${compChoice}.`)
                userScore++
            } 
        // if computer wins
            else if (
                (userChoice === 'Rock' && compChoice === 'Paper') ||
                (userChoice === 'Paper' && compChoice === 'Scissors') ||
                (userChoice === 'Scissors' && compChoice === 'Rock')
              ){
                response = (`That's gonna hurt! Your ${userChoice} got beat by the computers ${compChoice}.`)
                 compScore++
            }
            alert(response + "\nThe score stands at your score = " + userScore + " and the computers score = " + compScore);
        }

        whoWins();    

        // user vs computer score is kept and displayed

        // game loops and plays firs to 5 roundwins and then resets
        
    }
    
    
   

    for (let i = 0; i < 5; i++) {
        game();
        
    }
    
    if (userScore > compScore) {
            alert(`You actually did it! You beat the computer with a score of ${userScore} to ${compScore}!`)
        } else if (compScore > userScore) {
            alert(`Oh no. You are now dead and the computer has beaten you and doomed humanity with a score of ${compScore} to ${userScore}!`)
        } else if (compScore = userScore) {
            alert(`You tied with a score of ${userScore} to ${compScore}! You're gonna have to play again to see if you're able to save humanity!`)
        }

    function resetGame() {
        userScore = 0
        compScore = 0
    }
    
    resetGame();

    game();
           
    </script>
</body>
</html>